<div
  id="deleteModal"
  class="hidden fixed inset-0 z-10 flex items-center justify-center backdrop-blur-sm <%= user.settings.theme === 'dark' ? 'bg-dark-primary text-dark-text' : ' text-text bg-primary' %> bg-opacity-50 p-5 md:p-0 z-50"
  onclick="closeDeleteModal()"
>
  <div
    class="<%= user.settings.theme === 'dark' ? 'bg-dark-background text-dark-text' : 'bg-white text-gray-900' %> w-full sm:max-w-md lg:max-w-lg p-6 rounded-xl shadow-2xl transition-all duration-300"
    onclick="event.stopPropagation()"
  >
     <div class="flex items-center justify-between mb-4">
      <h2
        class="text-xl font-semibold font-sans"
      >
        Confirm Deletion
      </h2>
      <button
            onclick="closeDeleteModal()"
            class="text-gray-400 hover:text-red-500 transition duration-200 text-xl"
            aria-label="Close"
          >
            &times;
          </button>
      </div>
      <p
        class="text-sm mb-6 <%= user.settings.theme === 'dark' ? 'text-gray-400' : 'text-gray-600' %>"
      >
        Are you sure you want to delete this blog? This action cannot be undone.
      </p>
      <div  class="flex justify-end space-x-3">
        <button
          onclick="closeDeleteModal()"
          class="px-4 py-2 rounded-md border border-gray-300 text-sm font-medium <%= user.settings.theme === 'dark' ? 'text-gray-300 hover:bg-dark-primary' : 'text-gray-700 hover:bg-gray-100' %> transition duration-200"
        >
          Cancel
        </button>
        <button
          onclick="confirmDelete()"
          class="px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white text-sm font-medium shadow-md transition duration-200"
        >
          Confirm Delete
        </button>
      </div>
    </div>
  </div>

<script>
  let selectedBlogSlug = null;

  function openDeleteModal(slug) {
    selectedBlogSlug = slug;
    document.getElementById("deleteModal").classList.remove("hidden");
  }

  function closeDeleteModal() {
    document.getElementById("deleteModal").classList.add("hidden");
    selectedBlogSlug = null;
  }

  async function confirmDelete() {
    

    try {
      const response = await fetch(`/api/blog/delete/${selectedBlogSlug}`, {
        method: "DELETE",
        headers: {
          "Content-Type": "application/json",
        }
      });

      const data = await response.json();
      if (response.ok) {
        alert("Blog deleted successfully");
        closeDeleteModal();
        window.location.reload();
      } else {
        alert(data.message || "Error deleting blog");
      }
    } catch (error) {
      console.error("Error:", error);
      alert("An error occurred. Please try again.");
    }
  }
</script>
